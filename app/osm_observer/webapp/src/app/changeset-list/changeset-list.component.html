<div>
  <div class="form-inline">
    <button class="btn btn-default btn-sm"
            [class.btn-primary]="timeRange==='today'"
            (click)="setTimeRange('today')">
      {{ 'TODAY' | translate }}
    </button>
    <button class="btn btn-default btn-sm"
            [class.btn-primary]="timeRange==='yesterday'"
            (click)="setTimeRange('yesterday')">
      {{ 'YESTERDAY' | translate }}
    </button>
    <button class="btn btn-default btn-sm"
            [class.btn-primary]="timeRange==='lastWeek'"
            (click)="setTimeRange('lastWeek')">
      {{ 'LAST WEEK' | translate }}
    </button>
    <div class="form-group">
      <input type="text"
             class="form-control form-control-sm"
             id="username"
             placeholder="{{ 'USERNAME' | translate }}"
             (keyup)="applyChange()"
             [(ngModel)]="username" />
    </div>
    <div class="form-group">
      <input type="number"
             class="form-control form-control-sm"
             id="average-score"
             placeholder="{{ 'SCORE' | translate }}"
             (keyup)="applyChange()"
             [(ngModel)]="sumScore" />
    </div>
    <div class="form-group">
      <input type="number"
             class="form-control form-control-sm"
             id="num-reviews"
             placeholder="{{ 'REVIEWS' | translate }}"
             (keyup)="applyChange()"
             [(ngModel)]="numReviews" />
    </div>
    <div class="form-group">
      <select class="form-control form-control-sm"
              id="coverage"
              type="number"
              #coverage
              (change)="setCoverageId(coverage.value)"
              [(ngModel)]="coverageId">
        <option [value]="undefined">
          {{ 'SELECT COVERAGE' | translate }}
        </option>
        <option *ngFor="let coverage of coverages"
                [value]="coverage.id">
          {{ coverage.name }}
        </option>
      </select>
    </div>
    <button class="btn btn-default btn-sm"
            (click)="resetFilters()">
      {{ 'RESET FILTERS' | translate }}
    </button>
  </div>
</div>
<table class="table table-striped">
  <thead>
    <tr>
      <th>{{ 'ID' | translate }}</th>
      <th>{{ 'OSM ID' | translate }}</th>
      <th>{{ 'CLOSED AT' | translate }}</th>
      <th>{{ 'USERNAME' | translate }}</th>
      <th>{{ 'CHANGES' | translate }}</th>
      <th>{{ 'REVIEWS' | translate }}</th>
      <th>{{ 'SCORE' | translate }}</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let changeset of changesets">
      <tr>
        <td>{{ changeset.id }}</td>
        <td><a href="http://www.openstreetmap.org/changeset/{{ changeset.osmId }}" target="_blank">{{ changeset.osmId }}</a></td>
        <td>{{ changeset.closedAt | date:'d.M.y HH:mm:ss' }}</td>
        <td><a href="http://www.openstreetmap.org/user/{{ changeset.username }}" target="_blank">{{ changeset.username }}</a></td>
        <td>{{ changeset.numChanges }}</td>
        <td>{{ changeset.numReviews }}</td>
        <td>{{ changeset.sumScore }}</td>
        <td>
          <a class="btn btn-secondary btn-sm"
             role="button"
             [routerLink]="[changeset.osmId, 'details']">
            {{ 'DETAILS' | translate }}
          </a>
        </td>
      </tr>
    </ng-container>
  </tbody>
</table>
