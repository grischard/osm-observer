Database
--------

::
    createuser -P os
    createdb -O os osm_observer
    echo 'create extension postgis' | psql -d osm_observer
    echo 'create extension hstore' | psql -d osm_observer

    psql -d osm_observer -c "CREATE SCHEMA changes_app; ALTER SCHEMA changes_app OWNER TO os;"
    psql -d osm_observer -c "CREATE SCHEMA changes; ALTER SCHEMA changes OWNER TO os;"


Testing Database
----------------

::
    createdb -O os osm_observer_testing
    echo 'create extension postgis' | psql -d osm_observer_testing
    echo 'create extension hstore' | psql -d osm_observer_testing

    psql -d osm_observer_testing -c "CREATE SCHEMA changes_app; ALTER SCHEMA changes_app OWNER TO os;"
    psql -d osm_observer -c "CREATE SCHEMA changes; ALTER SCHEMA changes OWNER TO os;"



Imposm-Changes
--------------

See https://github.com/omniscale/imposm-changes for imposm-changes installation notes

::
    imposm-changes -config imposm-changes-config.json


Installation
------------

::
    mkvirtualenv -p /usr/bin/python3 osm-observer

::
    pip install -r requirements.txt
    pip install -e ../app/

::
    python manage.py create_db
    python manage.py insert_changesets


Using Angular-CLI for the app
-----------------------------

::
    npm install -g angular-cli

::
    (cd ../app/osm_observer/webapp && npm install)


Building WebApp
---------------

::
    python manage.py build_webapp


Development
-----------

::
    python manage.py runserver

::
    python manage.py watch_webapp


..note::
    Default username: admin
    Default password: secure


Translation
-----------

::
    python manage.py update_ng_translation

..note::
    Each language must be defined in webapp/package.json in script section


Import coverages from geojson
-----------------------------

Parameters
    geojson_file
        File to import. Can be a normal or gziped geojson file.
    name_prop
        Property of geojson coverage is named from

::
    python manage.py coverages_from_geojson --geojson_file nrw.geojson.gz --name_prop GEN


Build package
-------------

::
    python manage.py build_webapp
    cd ../app
    python setup.py sdist
